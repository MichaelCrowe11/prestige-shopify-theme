{% comment %}
  Header Section
  Author: Michael Benjamin Crowe
{% endcomment %}

<header class="header{% if settings.sticky_header %} header--sticky{% endif %}{% if settings.transparent_header and template == 'index' %} header--transparent{% endif %}" data-section-id="{{ section.id }}" data-section-type="header">
  <div class="container">
    <div class="header__inner">
      <div class="header__left">
        <button class="header__menu-toggle show-mobile" data-mobile-menu-toggle aria-label="Open menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"/>
          </svg>
        </button>

        <nav class="header__nav hide-mobile">
          {% for link in linklists[section.settings.menu].links %}
            <a href="{{ link.url }}" class="header__nav-item{% if link.active %} is-active{% endif %}">
              {{ link.title }}
            </a>
          {% endfor %}
        </nav>
      </div>

      <div class="header__logo">
        {% if settings.logo != blank %}
          <a href="{{ routes.root_url }}">
            <img src="{{ settings.logo | image_url: width: settings.logo_width }}"
                 alt="{{ shop.name }}"
                 width="{{ settings.logo_width }}"
                 height="{{ settings.logo_width | divided_by: settings.logo.aspect_ratio }}"
                 loading="eager">
          </a>
        {% else %}
          <a href="{{ routes.root_url }}" class="header__logo-text">
            {{ shop.name }}
          </a>
        {% endif %}
      </div>

      <div class="header__right">
        <div class="header__actions">
          <button class="header__action" data-search-toggle aria-label="Search">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
          </button>

          {% if shop.customer_accounts_enabled %}
            <a href="{{ routes.account_url }}" class="header__action" aria-label="Account">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </a>
          {% endif %}

          <button class="header__action" data-wishlist-toggle aria-label="Wishlist">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
            <span class="header__action-count" data-wishlist-count style="display: none;">0</span>
          </button>

          <button class="header__action" data-cart-toggle aria-label="Cart">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 2L6 9H3l3-7h3zM15 2l3 7h3l-3-7h-3z"/>
              <path d="M3 9h18v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
              <path d="M12 9v6"/>
            </svg>
            <span class="header__action-count" data-cart-count style="display: none;">0</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  {% if section.settings.show_announcement_bar %}
    <div class="announcement-bar" style="background-color: {{ section.settings.announcement_bg_color }}; color: {{ section.settings.announcement_text_color }};">
      <div class="container">
        <div class="announcement-bar__inner">
          {% if section.settings.announcement_link != blank %}
            <a href="{{ section.settings.announcement_link }}" class="announcement-bar__link">
          {% endif %}
            {{ section.settings.announcement_text }}
          {% if section.settings.announcement_link != blank %}
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  {% endif %}
</header>

<nav class="mobile-menu" data-mobile-menu>
  <div class="mobile-menu__header">
    <h3>Menu</h3>
    <button class="mobile-menu__close" data-mobile-menu-close>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <ul class="mobile-menu__nav">
    {% for link in linklists[section.settings.menu].links %}
      <li>
        <a href="{{ link.url }}" class="mobile-menu__link{% if link.active %} is-active{% endif %}">
          {{ link.title }}
        </a>
      </li>
    {% endfor %}
  </ul>

  {% if shop.customer_accounts_enabled %}
    <div class="mobile-menu__account">
      {% if customer %}
        <a href="{{ routes.account_url }}">{{ 'customer.general.account' | t }}</a>
        <a href="{{ routes.account_logout_url }}">{{ 'customer.general.logout' | t }}</a>
      {% else %}
        <a href="{{ routes.account_login_url }}">{{ 'customer.general.login' | t }}</a>
        <a href="{{ routes.account_register_url }}">{{ 'customer.general.register' | t }}</a>
      {% endif %}
    </div>
  {% endif %}
</nav>

<style>
  .announcement-bar {
    text-align: center;
    padding: 0.5rem 0;
    font-size: 0.875rem;
    font-weight: 500;
  }

  .announcement-bar__link {
    color: inherit;
    text-decoration: none;
  }

  .header__logo-text {
    font-size: 1.5rem;
    font-weight: 600;
    letter-spacing: -0.02em;
    text-transform: uppercase;
  }

  .mobile-menu {
    position: fixed;
    top: 0;
    left: -100%;
    bottom: 0;
    width: 300px;
    background-color: var(--color-background);
    z-index: 1001;
    transition: left var(--animation-duration) var(--animation-timing);
    overflow-y: auto;
  }

  .mobile-menu.is-open {
    left: 0;
    box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
  }

  .mobile-menu__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem;
    border-bottom: 1px solid var(--color-border);
  }

  .mobile-menu__nav {
    list-style: none;
    padding: 1rem 0;
  }

  .mobile-menu__link {
    display: block;
    padding: 1rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: background-color var(--animation-duration) var(--animation-timing);
  }

  .mobile-menu__link:hover,
  .mobile-menu__link.is-active {
    background-color: var(--color-background-secondary);
  }

  .mobile-menu__account {
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--color-border);
  }

  .mobile-menu__account a {
    display: block;
    padding: 0.5rem 0;
    font-size: 0.875rem;
  }

  .header--transparent.is-filled {
    background-color: var(--color-background);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .header--sticky.is-hidden {
    transform: translateY(-100%);
  }

  .header--sticky.is-scrolled {
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  body.menu-open {
    overflow: hidden;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('[data-mobile-menu-toggle]');
    const mobileMenuClose = document.querySelector('[data-mobile-menu-close]');
    const mobileMenu = document.querySelector('[data-mobile-menu]');

    if (mobileMenuToggle) {
      mobileMenuToggle.addEventListener('click', function() {
        mobileMenu.classList.add('is-open');
        document.body.classList.add('menu-open');
      });
    }

    if (mobileMenuClose) {
      mobileMenuClose.addEventListener('click', function() {
        mobileMenu.classList.remove('is-open');
        document.body.classList.remove('menu-open');
      });
    }
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "header",
      "content": "Announcement bar"
    },
    {
      "type": "checkbox",
      "id": "show_announcement_bar",
      "label": "Show announcement bar",
      "default": true
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement text",
      "default": "Free shipping on orders over $100"
    },
    {
      "type": "url",
      "id": "announcement_link",
      "label": "Announcement link"
    },
    {
      "type": "color",
      "id": "announcement_bg_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "announcement_text_color",
      "label": "Text color",
      "default": "#ffffff"
    }
  ]
}
{% endschema %}